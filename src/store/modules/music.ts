/** @format */

import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import { IMusic } from '@/types/music'
import { useAudio } from '@/hooks/useAudio'
import { debounce } from '@/utils/debounce'

export const useMusicStore = defineStore(
  'music',
  () => {
    //
    const show = ref<boolean>(false)
    const setShow = (flag: boolean) => {
      show.value = flag
    }
    const miniShow = ref<boolean>(true)
    const setMiniShow = (flag: boolean) => {
      miniShow.value = flag
    }
    /**
     歌曲播放模式
     * 0 顺序
     * 1 随机
     * 2 单曲循环
     */
    const { createAudio, audio, getMusicUrl } = useAudio()
    const playMode = ref<number>(0)
    const setPlayMode = (mode: number) => {
      playMode.value = mode
    }

    const nowMusic = computed<IMusic>(() => {
      return musicList.value[nowIndex.value] || {}
    })

    /**
     * 当前音乐下标
     */
    const nowIndex = ref<number>(0)
    /**
     * 改变当前音乐下标
     */
    const changeIndex = debounce((index: number) => {
      if (index === nowIndex.value) return
      nowIndex.value = index
      getMusicUrl(nowMusic.value.id || '')
    })
    const changeIndexUnlimited = (index: number) => {
      if (index === nowIndex.value) return
      nowIndex.value = index
      getMusicUrl(nowMusic.value.id || '')
    }

    // 下一首
    const nextMusic = () => {
      if (playMode.value === 1) {
        const randomIndex = Math.floor(Math.random() * musicList.value.length)
        // 防止随机到当前音乐
        if (randomIndex === nowIndex.value) {
          nextMusic()
          return
        }
        changeIndex(randomIndex)
        return
      }
      const nextIndex = (nowIndex.value + 1) % musicList.value.length
      changeIndex(nextIndex)
    }
    // 上一首
    const prevMusic = () => {
      const prevIndex = (nowIndex.value - 1 + musicList.value.length) % musicList.value.length
      changeIndex(prevIndex)
    }
    /**
     * 播放列表
     */
    const musicList = ref<IMusic[]>([])
    musicList.value = [
      {
        id: 404465600,
        name: '十二',
        singer: '留声玩具',
        album: '曾以为梦想遥不可及',
        mvid: 0,
        lyric: [
          { time: 0, lyric: '', uid: 148404 },
          { time: 0, lyric: '', uid: 154236 },
          { time: 0, lyric: '', uid: 4551 },
          { time: 0, lyric: '', uid: 275405 },
          { time: 0, lyric: '', uid: 576656 },
          { time: 0, lyric: '', uid: 990401 },
          { time: 0, lyric: '', uid: 996643 },
          { time: 0, lyric: ' 作词 : 辻', uid: 879568 },
          { time: 1, lyric: ' 作曲 : 留声玩具', uid: 136153 },
          { time: 13.8, lyric: '你是 九月夏天滚烫的浪', uid: 706221 },
          { time: 20.63, lyric: '你是 忽而大雨瓢泼的向往', uid: 727273 },
          { time: 27.67, lyric: '你是 飞越山川河流的大梦一场', uid: 958309 },
          { time: 34.7, lyric: '你是 整夜白雪茫茫的路旁', uid: 764841 },
          { time: 41.32, lyric: '你是 南半球的年少风光', uid: 61953 },
          { time: 48.47, lyric: '你是无言 你是对望', uid: 759725 },
          { time: 56.06, lyric: '你是 隔着落地窗的翅膀', uid: 596378 },
          { time: 63.04, lyric: '你是 小城艳阳高照的清香', uid: 698615 },
          { time: 69.98, lyric: '你是 无力抗拒不停追逐的磁场', uid: 655275 },
          { time: 77.06, lyric: '你是 傍晚落日余晖的方向', uid: 53677 },
          { time: 83.69, lyric: '你是我不能拥抱的短暂理想', uid: 157507 },
          { time: 90.83, lyric: '你是旅途 你是故乡', uid: 997107 },
          { time: 127.5, lyric: '你是 不愿停下的难忘情长', uid: 459354 },
          { time: 134.49, lyric: '你是 逃离废墟的路途茫茫', uid: 148255 },
          { time: 141.52, lyric: '你是 忽明忽暗的不悔时光', uid: 181648 },
          { time: 148.75, lyric: '你是 一束生命的全力绽放', uid: 947112 },
          { time: 154.78, lyric: '你是 认真书写的一笔一划', uid: 455342 },
          { time: 162.76, lyric: '你是 几缕发丝的错误生长', uid: 590049 },
          { time: 170.1, lyric: '你是解药 你是营养', uid: 995914 },
          { time: 200.68, lyric: '你是 四海为家的回头牵肠', uid: 70706 },
          { time: 207.66, lyric: '你是 我独享的遗憾和渴望', uid: 532966 },
          { time: 214.54, lyric: '你是我不愿醒来的梦啊柔情一场', uid: 322475 },
          { time: 222.74, lyric: '我的名字 叫难忘', uid: 722382 },
          { time: 230.26, lyric: '我的名字叫难忘', uid: 932935 },
          { time: 235.74, lyric: '我的名字啊叫难忘', uid: 629698 },
          { time: 99999, lyric: '', uid: 71767 },
          { time: 99999, lyric: '', uid: 408514 },
          { time: 99999, lyric: '', uid: 997414 },
          { time: 99999, lyric: '', uid: 627502 },
          { time: 99999, lyric: '', uid: 425828 },
          { time: 99999, lyric: '', uid: 227169 },
          { time: 99999, lyric: '', uid: 111162 },
        ],
        content:
          '看过一个评论说觉得处处吻这首歌很适合那个年代\n像是哥哥的倾国倾城\n像是小李子的深情不悔\n像是王祖贤的风华绝代\n是林青霞的风姿卓绝',
        src: 'http://m701.music.126.net/20231215152519/1dcd626ec07f0c6adf9a519d2fd2beb8/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/28481834886/dce1/36de/4c7a/12a79ff3ad186b69458f1201bd6711a9.mp3',
        cover: 'https://p2.music.126.net/Ns7tXM8elBnTT6RKwik-Gw==/16586132905149606.jpg',
      },
      {
        id: 2002753297,
        name: '123',
        singer: 'SSr',
        album: '123',
        mvid: 0,
        cover: 'https://p1.music.126.net/XUFQo8UBFdYsUoNPcYoe7w==/109951168102899762.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 439394 },
          { time: 0, lyric: '', uid: 455859 },
          { time: 0, lyric: '', uid: 151704 },
          { time: 0, lyric: '', uid: 136897 },
          { time: 0, lyric: '', uid: 169017 },
          { time: 0, lyric: '', uid: 860998 },
          { time: 0, lyric: '', uid: 475134 },
          { time: 0, lyric: ' 作词 : SSr/ljz329', uid: 381933 },
          { time: 1, lyric: ' 作曲 : SSr/ljz329', uid: 834168 },
          { time: 2, lyric: ' 编曲 : DiESi', uid: 169 },
          { time: 16.8, lyric: 'doremi doremi doremi', uid: 768745 },
          { time: 19.41, lyric: 'she stuck on my head like', uid: 204996 },
          { time: 20.63, lyric: 'melody melody', uid: 199785 },
          { time: 22.09, lyric: 'marry me', uid: 691872 },
          { time: 23.17, lyric: 'all the way up im be like', uid: 21353 },
          { time: 24.65, lyric: 'guess i can be ur man on my bed', uid: 809547 },
          { time: 27.62, lyric: '抓住你双手', uid: 825405 },
          { time: 29.33, lyric: '别放我在friend zone', uid: 307855 },
          { time: 33.03, lyric: '拜托不要一直对我猜测 这场游戏我不是个好的fighter', uid: 949722 },
          { time: 35.86, lyric: '何必搞的你我那么紧张 知道你爱胡思乱想 如果觉得我会背叛你是never', uid: 243668 },
          { time: 39.74, lyric: '做点不太顶满的音乐 你带情感的听', uid: 468633 },
          { time: 42.06, lyric: '希望平缓下 你那时常敏感的心', uid: 701213 },
          { time: 44.19, lyric: '平坦的生活 我们平淡的过', uid: 627369 },
          { time: 45.99, lyric: '你是一颗让我灵感不会停产的金', uid: 158644 },
          { time: 48.14, lyric: '荒唐的生活需要你点缀 我不困你不知几点睡', uid: 774396 },
          { time: 51.59, lyric: '你是我的终点也是起点', uid: 916474 },
          { time: 53.25, lyric: '你在半夜偷偷洗脸 我不想要让你挤眼泪', uid: 463405 },
          { time: 55.41, lyric: '对你crazy的爱永远激荡着', uid: 676044 },
          { time: 57.3, lyric: 'you are my baby girl 是我希望的', uid: 817583 },
          { time: 59.39, lyric: '你纯白的就像是一张纸', uid: 679479 },
          { time: 61.09, lyric: "I'm Jay-Z你是我的Beyoncé", uid: 768065 },
          { time: 63.22, lyric: '只要有我的tape 就没他们的位置', uid: 804535 },
          { time: 65.3, lyric: 'SSR 红花会', uid: 796834 },
          { time: 67.22, lyric: 'you stay with me我才能发挥', uid: 492493 },
          { time: 69.11, lyric: '我喝冰啤酒 你喝浓咖啡', uid: 397519 },
          { time: 71.34, lyric: '来自两个不同的世界 两颗不同的灵魂', uid: 722754 },
          { time: 73.49, lyric: '写着互融的交响曲', uid: 848201 },
          { time: 75.01, lyric: '就像有天乔峰爱上阿朱 就像虚竹看到梦姑', uid: 953569 },
          { time: 77.23, lyric: '杨过终南山遇见了小龙女', uid: 886635 },
          { time: 79.67, lyric: 'doremi doremi doremi', uid: 899051 },
          { time: 82.34, lyric: 'she stuck on my head like', uid: 548441 },
          { time: 83.61, lyric: 'melody melody', uid: 624605 },
          { time: 85.07, lyric: 'marry me', uid: 346525 },
          { time: 86.07, lyric: 'all the way up im be like', uid: 881869 },
          { time: 87.61, lyric: 'guess i can be ur man on my bed', uid: 461841 },
          { time: 90.48, lyric: '抓住你双手', uid: 362537 },
          { time: 92.29, lyric: '别放我在friend zone', uid: 688864 },
          { time: 95.56, lyric: '最美的花瓣也配不上你 修长的头发', uid: 586374 },
          { time: 98.11, lyric: '没有任何胶卷能让时光定格在此刻留下', uid: 556864 },
          { time: 101.09, lyric: '怎么形容都格格不入 每加一笔都画蛇添足', uid: 290496 },
          { time: 105.2, lyric: '像卢浮宫里最贵的油画 连海浪都像来自多米尼加', uid: 187541 },
          { time: 108.99, lyric: '你我的阳光是伊比利亚', uid: 347193 },
          { time: 110.94, lyric: '这并不冲突 有了你它变得生动丰富', uid: 286825 },
          { time: 114.07, lyric: '所有景色都在对你拥护', uid: 875925 },
          { time: 115.86, lyric: '你像某个童话里偷跑的公主', uid: 57227 },
          { time: 117.85, lyric: '每个动作都是完美音节', uid: 944695 },
          { time: 119.72, lyric: '拨动我心弦 能让我冰点 能让我清甜', uid: 767535 },
          { time: 122.78, lyric: '多看你一眼 都像在侵权', uid: 723706 },
          { time: 124.76, lyric: '你是我拥有最动听的音源', uid: 136631 },
          { time: 126.78, lyric: 'stay with me  小心翼翼倒进杯子里', uid: 863419 },
          { time: 129.65, lyric: '你是我睡醒时的冰咖啡 也是我微醺时的白兰地', uid: 565987 },
          { time: 133.44, lyric: "I catch you bae don't play with me", uid: 887048 },
          { time: 135.79, lyric: '小心翼翼倒进杯子里', uid: 99583 },
          { time: 137.48, lyric: '就像海盗口袋里的朗姆酒', uid: 930965 },
          { time: 139.42, lyric: '就像牛仔马鞍上的威士忌', uid: 189274 },
          { time: 142.71, lyric: 'doremi doremi doremi', uid: 420625 },
          { time: 145.41, lyric: 'she stuck on my head like', uid: 269992 },
          { time: 146.58, lyric: 'melody melody', uid: 209629 },
          { time: 147.99, lyric: 'marry me', uid: 887155 },
          { time: 149.07, lyric: 'all the way up im be like', uid: 652468 },
          { time: 150.49, lyric: 'guess i can be ur man on my bed', uid: 668257 },
          { time: 153.47, lyric: '抓住你双手', uid: 439887 },
          { time: 155.05, lyric: '别放我在friend zone', uid: 656886 },
          { time: 160.82, lyric: ' 音频编辑 : Tim姜皓天', uid: 751097 },
          { time: 166.6, lyric: ' 混音&母带工程师 : Tim姜皓天', uid: 988354 },
          { time: 172.37, lyric: ' 和声编写/演唱 : SSr/ljz329', uid: 293506 },
          { time: 178.15, lyric: ' 企划 : Mandy/狗哥', uid: 977935 },
          { time: 183.93, lyric: ' 统筹 : 阿呆/马也_Crabbit', uid: 151767 },
          { time: 99999, lyric: '', uid: 55362 },
          { time: 99999, lyric: '', uid: 119621 },
          { time: 99999, lyric: '', uid: 157344 },
          { time: 99999, lyric: '', uid: 948106 },
          { time: 99999, lyric: '', uid: 108285 },
          { time: 99999, lyric: '', uid: 147506 },
          { time: 99999, lyric: '', uid: 781628 },
        ],
        content:
          '看过一个评论说觉得处处吻这首歌看过一个评论说觉得处处吻这首歌很适看过一个评论说觉得处处吻这首歌很看过一个评论说觉得处处吻这首歌很适很适合那看过一个评论说觉得处处吻这首歌很适合那看过一个评论说觉得处处吻这首歌很适歌很适达瓦达娃大456达娃大达娃大啊吴大维达瓦的啊吊袜带阿瓦达啊阿迪王阿瓦达哇达瓦9999',
        src: 'http://m801.music.126.net/20231215152653/2e891045ba4282d0bfde7fefed55e37f/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/22934876543/6f9f/458a/bf2e/8d508d6388a99f0152e968181b091e17.mp3',
      },
      {
        id: 2090656102,
        name: 'W',
        singer: '李卿澈',
        album: '%',
        mvid: 0,
        cover: 'https://p2.music.126.net/CXr_rIaxkW5kwlIJHd8qSw==/109951168937694185.jpg',
        src: 'http://m701.music.126.net/20231215145743/5f1be16e3a51f20bbf5ad0c0ba452ea8/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/30836451287/6327/d9d7/7988/cd96ce7211bfdc0f01cb88b2df5aaa22.mp3',
        lyric: [
          { time: 0, lyric: '', uid: 518586 },
          { time: 0, lyric: '', uid: 343795 },
          { time: 0, lyric: '', uid: 654149 },
          { time: 0, lyric: '', uid: 301441 },
          { time: 0, lyric: '', uid: 574699 },
          { time: 0, lyric: '', uid: 680406 },
          { time: 0, lyric: '', uid: 797446 },
          { time: 0, lyric: ' 作词 : 李卿澈', uid: 611122 },
          { time: 1, lyric: ' 作曲 : 李卿澈', uid: 466932 },
          { time: 2, lyric: ' 编曲 : 李卿澈', uid: 467606 },
          { time: 5940, lyric: '纯音乐，请欣赏', uid: 463704 },
          { time: 99999, lyric: '', uid: 925035 },
          { time: 99999, lyric: '', uid: 547738 },
          { time: 99999, lyric: '', uid: 890163 },
          { time: 99999, lyric: '', uid: 859754 },
          { time: 99999, lyric: '', uid: 573904 },
          { time: 99999, lyric: '', uid: 918742 },
          { time: 99999, lyric: '', uid: 509055 },
        ],
        content: '123看过一个评论说觉得处处吻这首歌很适合那',
      },
      {
        id: 1459401324,
        name: 'DrunkAF',
        singer: 'AD',
        album: 'DrunkAF',
        mvid: 0,
        cover: 'https://p2.music.126.net/YoTwaWHIMOL20D6HR8Ceog==/109951165164471767.jpg',
        src: 'http://m8.music.126.net/20231215145958/e68333c6b2cfc44bab3793a228d336dc/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3352247896/0f1b/92e6/2492/6ad7b1b29f2caef37b9dc12e610af8ba.mp3',
        lyric: [
          { time: 0, lyric: '', uid: 99457 },
          { time: 0, lyric: '', uid: 714624 },
          { time: 0, lyric: '', uid: 9377 },
          { time: 0, lyric: '', uid: 68792 },
          { time: 0, lyric: '', uid: 826689 },
          { time: 0, lyric: '', uid: 719512 },
          { time: 0, lyric: '', uid: 580203 },
          { time: 0, lyric: ' 作词 : AD/O.T. Genasis', uid: 203914 },
          { time: 0, lyric: ' 作曲 : AD/O.T. Genasis', uid: 562227 },
          { time: 99999, lyric: '', uid: 380085 },
          { time: 99999, lyric: '', uid: 345297 },
          { time: 99999, lyric: '', uid: 949603 },
          { time: 99999, lyric: '', uid: 852858 },
          { time: 99999, lyric: '', uid: 721094 },
          { time: 99999, lyric: '', uid: 209704 },
          { time: 99999, lyric: '', uid: 667787 },
        ],
      },
      {
        id: 1308386896,
        name: "You Don't Know",
        singer: 'Dw',
        album: 'The Grand Debut',
        mvid: 0,
        src: 'http://m7.music.126.net/20231215143947/bbb8bf4e9bb1e5b12abaeec6fb4860ac/ymusic/3230/f1cc/8499/cbef23cbaca3e7fa279ddcf8e7a697b4.mp3',
        lyric: [
          { time: 0, lyric: '', uid: 28746 },
          { time: 0, lyric: '', uid: 167772 },
          { time: 0, lyric: '', uid: 331896 },
          { time: 0, lyric: '', uid: 461829 },
          { time: 0, lyric: '', uid: 25424 },
          { time: 0, lyric: '', uid: 19245 },
          { time: 0, lyric: '', uid: 509457 },
          { time: 99999, lyric: '', uid: 522186 },
          { time: 99999, lyric: '', uid: 288943 },
          { time: 99999, lyric: '', uid: 454699 },
          { time: 99999, lyric: '', uid: 529065 },
          { time: 99999, lyric: '', uid: 601779 },
          { time: 99999, lyric: '', uid: 363017 },
          { time: 99999, lyric: '', uid: 900093 },
        ],
        cover: 'https://p1.music.126.net/cqESanW_RErp9TR9g0dPtg==/109951163540290002.jpg',
      },
      {
        id: 2000871517,
        name: 'Night Dance',
        singer: 'ADW',
        album: 'Night Dance',
        mvid: 0,
        lyric: [
          { time: 0, lyric: '', uid: 439736 },
          { time: 0, lyric: '', uid: 965856 },
          { time: 0, lyric: '', uid: 633495 },
          { time: 0, lyric: '', uid: 904683 },
          { time: 0, lyric: '', uid: 355693 },
          { time: 0, lyric: '', uid: 924404 },
          { time: 0, lyric: '', uid: 872184 },
          { time: 0, lyric: ' 作曲 : Ondra Chladek', uid: 279594 },
          { time: 99999, lyric: '', uid: 18247 },
          { time: 99999, lyric: '', uid: 520595 },
          { time: 99999, lyric: '', uid: 309097 },
          { time: 99999, lyric: '', uid: 249215 },
          { time: 99999, lyric: '', uid: 843578 },
          { time: 99999, lyric: '', uid: 890483 },
          { time: 99999, lyric: '', uid: 80401 },
        ],
        src: 'http://m801.music.126.net/20231215093749/ea7d2e307dcee6ed2368fef79b65b0f4/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/22381800089/99c7/8fd0/030d/d2895e444958e9d19f18651fa1f1cafa.mp3',
        cover: 'https://p2.music.126.net/aUyUGp4ddByDophegOELXQ==/109951168083559234.jpg',
      },
      {
        id: 459089,
        name: '1',
        singer: '岡本光市',
        album: 'RANDOM',
        mvid: 0,
        cover: 'https://p2.music.126.net/jWdcbq8MxwEm9-rbdwBGZQ==/6040716883333198.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 988134 },
          { time: 0, lyric: '', uid: 845258 },
          { time: 0, lyric: '', uid: 925012 },
          { time: 0, lyric: '', uid: 525328 },
          { time: 0, lyric: '', uid: 839812 },
          { time: 0, lyric: '', uid: 604232 },
          { time: 0, lyric: '', uid: 774092 },
          { time: 5940, lyric: '纯音乐，请欣赏', uid: 360932 },
          { time: 99999, lyric: '', uid: 350055 },
          { time: 99999, lyric: '', uid: 451593 },
          { time: 99999, lyric: '', uid: 365985 },
          { time: 99999, lyric: '', uid: 481577 },
          { time: 99999, lyric: '', uid: 606563 },
          { time: 99999, lyric: '', uid: 994715 },
          { time: 99999, lyric: '', uid: 18795 },
        ],
        src: 'http://m8.music.126.net/20231215092513/fd66255da5afc03a0526a788c51aa85b/ymusic/d614/30c9/0738/e7dcd54f345ebeeb9833c768d6d6ec05.mp3',
      },
      {
        id: 2061904495,
        name: '前行',
        singer: '达瓦',
        album: '前行',
        mvid: 14640644,
        cover: 'https://p1.music.126.net/9m9vqvK2q2dfaUtnAkIRHw==/109951168721368291.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 82945 },
          { time: 0, lyric: '', uid: 59105 },
          { time: 0, lyric: '', uid: 165158 },
          { time: 0, lyric: '', uid: 157736 },
          { time: 0, lyric: '', uid: 164784 },
          { time: 0, lyric: '', uid: 300326 },
          { time: 0, lyric: '', uid: 378126 },
          { time: 0, lyric: ' 作词 : 俄金朋措', uid: 193108 },
          { time: 1, lyric: ' 作曲 : 俄金朋措', uid: 743963 },
          { time: 2, lyric: ' 制作人 : 次仁彭措', uid: 622986 },
          { time: 3, lyric: ' 原唱 : 达瓦', uid: 724942 },
          { time: 19.15, lyric: 'མི་ཚེ་ཡི་རིན་ཐང་།', uid: 282031 },
          { time: 23.16, lyric: '人的这一生', uid: 373584 },
          { time: 23.31, lyric: 'རྐང་རྗེས་རེ་རེ་བཞིན་དུ་འཚོལ་དགོས།', uid: 441987 },
          { time: 28.24, lyric: '一步一个脚印', uid: 673995 },
          { time: 28.39, lyric: 'ལམ་འདི་ལ་དཀའ་ངལ་དང་ཕྲག་དོག་ཆེ་རུང་།', uid: 740432 },
          { time: 33, lyric: '这条路虽然艰辛', uid: 592274 },
          { time: 33.18, lyric: 'བུ་ངའི་སེམས་ཤུགས་ནམ་ཡང་མི་ཞུམ།', uid: 575102 },
          { time: 37, lyric: '我依然坚定前行', uid: 194386 },
          { time: 37.42, lyric: '每一步走来', uid: 303557 },
          { time: 42.25, lyric: '感受微风吹散迷雾', uid: 93148 },
          { time: 46.84, lyric: '我知道离目标更近一步', uid: 106441 },
          { time: 51.45, lyric: '为了梦想坚定前行', uid: 582755 },
          { time: 55.87, lyric: '自由自在', uid: 714635 },
          { time: 57.23, lyric: '展翅高飞', uid: 662419 },
          { time: 60.45, lyric: '飞向远方', uid: 26737 },
          { time: 61.92, lyric: '心中的天堂', uid: 506776 },
          { time: 65.04, lyric: '虽然路上会有艰辛', uid: 489365 },
          { time: 69.52, lyric: '我依然坚定前行', uid: 339345 },
          { time: 74.01, lyric: 'ལམ་དེར་འཕྲད་བཞིན་པའི་དཀའ་བ།', uid: 560056 },
          { time: 76.35, lyric: '在路上遇到的困难', uid: 947004 },
          { time: 76.51, lyric: 'དཀའ་ངལ་འཕྲད་བཞིན་པའི་ཚོར་བ།', uid: 463063 },
          { time: 78.44, lyric: '在困难中苏醒', uid: 88292 },
          {
            time: 78.62,
            lyric: 'ཚེ་གཅིག་ལ་འབད་བརྩོན་བྱེད་བཞིན་པའི་དམིགས་ཡུལ་དེ་མཐོང་བས་སེམས་པ་དེ་དགའ་བ།',
            uid: 461513,
          },
          { time: 82.98, lyric: '看到一生奋斗的目标心里乐开了花', uid: 364573 },
          { time: 83.32, lyric: 'བསམ་པའི་རེ་བ་ཁྱོད་ལ་འཁོར་ཡོད།', uid: 563457 },
          { time: 85.12, lyric: '希望在身边', uid: 953423 },
          { time: 85.52, lyric: 'རེ་བའི་ཕུགས་མདུན་ཁྱོད་བཅང་ཡོད།', uid: 98227 },
          { time: 87.79, lyric: '梦想也就在你身上', uid: 103281 },
          { time: 87.96, lyric: 'འོད་སྟོང་ལྡན་པའི་མི་ཚེའི་ལམ་བུ་ང་དང་ཁྱོད་ལ་དབང་ཡོང་།', uid: 503656 },
          { time: 92.48, lyric: '光辉的人生属于我和你', uid: 750204 },
          { time: 110.31, lyric: 'མི་ཚེ་ཡི་རིན་ཐང་།', uid: 21198 },
          { time: 114.72, lyric: '人的这一生', uid: 232365 },
          { time: 114.88, lyric: 'རྐང་རྗེས་རེ་རེ་བཞིན་དུ་འཚོལ་དགོས།', uid: 496252 },
          { time: 119.63, lyric: '一步一个脚印', uid: 293894 },
          { time: 119.82, lyric: 'ལམ་འདི་ལ་དཀའ་ངལ་དང་ཕྲག་དོག་ཆེ་རུང་།', uid: 458345 },
          { time: 124.22, lyric: '这条路虽然艰辛', uid: 537132 },
          { time: 124.39, lyric: 'བུ་ངའི་སེམས་ཤུགས་ནམ་ཡང་མི་ཞུམ།', uid: 794828 },
          { time: 128.47, lyric: '我依然坚定前行', uid: 396089 },
          { time: 129.02, lyric: '每一步走来', uid: 183946 },
          { time: 133.7, lyric: '感受微风吹散迷雾', uid: 620371 },
          { time: 138.13, lyric: '我知道离目标更近一步', uid: 113127 },
          { time: 142.75, lyric: '为了梦想坚定前行', uid: 68341 },
          { time: 147.25, lyric: '自由自在', uid: 616087 },
          { time: 148.79, lyric: '展翅高飞', uid: 136509 },
          { time: 151.88, lyric: '飞向远方', uid: 216075 },
          { time: 153.43, lyric: '心中的天堂', uid: 412221 },
          { time: 156.47, lyric: '虽然路上会有艰辛', uid: 793494 },
          { time: 160.99, lyric: '我依然坚定前行', uid: 307249 },
          { time: 165.54, lyric: 'ལམ་དེར་འཕྲད་བཞིན་པའི་དཀའ་བ།', uid: 99919 },
          { time: 167.63, lyric: '在路上遇到的困难', uid: 436016 },
          { time: 167.77, lyric: 'དཀའ་ངལ་འཕྲད་བཞིན་པའི་ཚོར་བ།', uid: 789545 },
          { time: 169.86, lyric: '在困难中苏醒', uid: 404554 },
          {
            time: 170.01,
            lyric: 'ཚེ་གཅིག་ལ་འབད་བརྩོན་བྱེད་བཞིན་པའི་དམིགས་ཡུལ་དེ་མཐོང་བས་སེམས་པ་དེ་དགའ་བ།',
            uid: 98484,
          },
          { time: 174.83, lyric: '看到一生奋斗的目标心里乐开了花', uid: 15355 },
          { time: 174.99, lyric: 'བསམ་པའི་རེ་བ་ཁྱོད་ལ་འཁོར་ཡོད།', uid: 878836 },
          { time: 176.68, lyric: '希望在身边', uid: 445755 },
          { time: 176.85, lyric: 'རེ་བའི་ཕུགས་མདུན་ཁྱོད་བཅང་ཡོད།', uid: 541901 },
          { time: 179.43, lyric: '梦想也就在你身上', uid: 440609 },
          { time: 179.59, lyric: 'འོད་སྟོང་ལྡན་པའི་མི་ཚེའི་ལམ་བུ་ང་དང་ཁྱོད་ལ་དབང་ཡོང་།', uid: 621011 },
          { time: 183.71, lyric: '光辉的人生属于我和你', uid: 925605 },
          { time: 184.61, lyric: '自由自在', uid: 693227 },
          { time: 185.53, lyric: '展翅高飞', uid: 160619 },
          { time: 188.32, lyric: '飞向远方', uid: 476245 },
          { time: 189.93, lyric: '心中的天堂', uid: 688215 },
          { time: 193.15, lyric: '虽然路上会有艰辛', uid: 863022 },
          { time: 197.54, lyric: '我依然坚定前行', uid: 118095 },
          { time: 206.85, lyric: ' 宣传发行 : 谢旦贴吧工作室', uid: 357715 },
          { time: 99999, lyric: '', uid: 892993 },
          { time: 99999, lyric: '', uid: 666783 },
          { time: 99999, lyric: '', uid: 177354 },
          { time: 99999, lyric: '', uid: 394724 },
          { time: 99999, lyric: '', uid: 174465 },
          { time: 99999, lyric: '', uid: 712418 },
          { time: 99999, lyric: '', uid: 178063 },
        ],
        src: 'http://m701.music.126.net/20231215101629/eba725ab71536b5d6e0c5a40613bce44/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/29232295475/604e/fd97/3c24/8acf838f13d09e2bdf03dacca478b19e.mp3',
      },
      {
        id: 1824271286,
        name: '根本你不懂得爱我 (DJ抖音版)',
        singer: '顾北笙',
        album: '根本你不懂得爱我',
        mvid: 0,
        cover: 'https://p2.music.126.net/_Lxg1gD_TZYlzmHuEyhs6g==/109951165773003974.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 281975 },
          { time: 0, lyric: '', uid: 769297 },
          { time: 0, lyric: '', uid: 490237 },
          { time: 0, lyric: '', uid: 398413 },
          { time: 0, lyric: '', uid: 540483 },
          { time: 0, lyric: '', uid: 949735 },
          { time: 0, lyric: '', uid: 654588 },
          { time: 0, lyric: ' 作词 : 无', uid: 306062 },
          { time: 1, lyric: ' 作曲 : 无', uid: 269972 },
          { time: 3.17, lyric: ' 根本你不懂得 不懂得爱我', uid: 772102 },
          { time: 6.73, lyric: ' 辛苦你日或夜在受罚迁就我', uid: 191849 },
          { time: 10.63, lyric: ' 付上几多 后悔几多 计算结果', uid: 672632 },
          { time: 18.06, lyric: ' 根本你不懂得 不懂得爱我', uid: 141427 },
          { time: 21.82, lyric: ' 仿佛我站或坐动或静都是错', uid: 617672 },
          { time: 25.67, lyric: ' 分手可会 得到你肯挂住我', uid: 717168 },
          { time: 35.83, lyric: ' 笑不出是为什么不开心', uid: 865875 },
          { time: 39.21, lyric: ' 今天我喊不出但是实在好伤心', uid: 518916 },
          { time: 42.74, lyric: " 讲一句I don't care", uid: 669377 },
          { time: 44.45, lyric: ' 极度受伤的声音', uid: 631843 },
          { time: 46.56, lyric: ' 一起过己很好 我不贪心', uid: 101049 },
          { time: 49.93, lyric: ' 当初爱有多深是动地惊天直近', uid: 762046 },
          { time: 54.01, lyric: ' 真感觉换受罪教训', uid: 313523 },
          { time: 57.75, lyric: ' 今天我说分手在寂寞当中偷生', uid: 884083 },
          { time: 61.36, lyric: ' 不需要假惺惺强装关心', uid: 632245 },
          { time: 65.32, lyric: ' 你变改的心是属别个他', uid: 903969 },
          { time: 69.05, lyric: ' 无需要再害怕 我就当放假', uid: 393715 },
          { time: 74.69, lyric: ' 你就放过我好吗', uid: 535133 },
          { time: 79.94, lyric: ' 根本你不懂得 不懂得爱我', uid: 85988 },
          { time: 83.54, lyric: ' 辛苦你日或夜在受罚迁就我', uid: 638548 },
          { time: 87.46, lyric: ' 付上几多 后悔几多 计算结果', uid: 524055 },
          { time: 94.82, lyric: ' 根本你不懂得 不懂得爱我', uid: 234594 },
          { time: 98.9, lyric: ' 仿佛我站或坐动或静都是错', uid: 106109 },
          { time: 102.4, lyric: ' 分手可会 得到你肯挂住我', uid: 627253 },
          { time: 143.98, lyric: ' 笑不出是为什么不开心', uid: 69992 },
          { time: 147.73, lyric: ' 今天我喊不出但是实在好伤心', uid: 658241 },
          { time: 151.47, lyric: " 讲一句I don't care", uid: 124136 },
          { time: 153.15, lyric: ' 极度受伤的声音', uid: 981815 },
          { time: 155.25, lyric: ' 一起过己很好 我不贪心', uid: 580004 },
          { time: 159.02, lyric: ' 当初爱有多深是动地惊天直近', uid: 897094 },
          { time: 162.59, lyric: ' 真感觉换受罪教训', uid: 100189 },
          { time: 166.5, lyric: ' 今天我说分手在寂寞当中偷生', uid: 977231 },
          { time: 170.13, lyric: ' 不需要假惺惺强装关心', uid: 986447 },
          { time: 174, lyric: ' 你变改的心是属别个他', uid: 600816 },
          { time: 177.87, lyric: ' 无需要再害怕 我就当放假', uid: 983932 },
          { time: 183.36, lyric: ' 你就放过我好吗', uid: 831612 },
          { time: 188.62, lyric: ' 根本你不懂得 不懂得爱我', uid: 829473 },
          { time: 192.57, lyric: ' 辛苦你日或夜在受罚迁就我', uid: 543903 },
          { time: 196.21, lyric: ' 付上几多 后悔几多 计算结果', uid: 4675 },
          { time: 203.69, lyric: ' 根本你不懂得 不懂得爱我', uid: 417039 },
          { time: 207.67, lyric: ' 仿佛我站或坐动或静都是错', uid: 797615 },
          { time: 211.12, lyric: ' 分手可会 得到你肯挂住我', uid: 689468 },
          { time: 218.84, lyric: ' 根本你不懂得 不懂得爱我', uid: 330706 },
          { time: 222.5, lyric: ' 辛苦你日或夜在受罚迁就我', uid: 217763 },
          { time: 226.18, lyric: ' 付上几多 后悔几多 计算结果', uid: 886457 },
          { time: 233.61, lyric: ' 根本你不懂得 不懂得爱我', uid: 136877 },
          { time: 237.29, lyric: ' 仿佛我站或坐动或静都是错', uid: 957287 },
          { time: 241.16, lyric: ' 分手可会 得到你肯挂住我', uid: 72701 },
          { time: 99999, lyric: '', uid: 510997 },
          { time: 99999, lyric: '', uid: 593733 },
          { time: 99999, lyric: '', uid: 706925 },
          { time: 99999, lyric: '', uid: 284652 },
          { time: 99999, lyric: '', uid: 54043 },
          { time: 99999, lyric: '', uid: 149638 },
          { time: 99999, lyric: '', uid: 723496 },
        ],
        src: 'http://m801.music.126.net/20231215101641/f5deb2c3da530b1cdc7366f572b43a5c/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/7708167788/b3f4/89f2/0279/ab3e5788234b7e1ea25cf518dd89dd25.mp3',
      },
      {
        id: 165339,
        name: '万有引力',
        singer: '汪苏泷',
        album: '万有引力',
        mvid: 5383759,
        cover: 'https://p1.music.126.net/KUUrg-bbybCdG_EwDSnNFA==/109951164176658680.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 711208 },
          { time: 0, lyric: '', uid: 379828 },
          { time: 0, lyric: '', uid: 704954 },
          { time: 0, lyric: '', uid: 917428 },
          { time: 0, lyric: '', uid: 216265 },
          { time: 0, lyric: '', uid: 828946 },
          { time: 0, lyric: '', uid: 121936 },
          { time: 0, lyric: ' 作词 : 汪苏泷', uid: 961733 },
          { time: 1, lyric: ' 作曲 : 汪苏泷', uid: 900045 },
          { time: 2, lyric: ' 编曲 : 金若晨', uid: 422992 },
          { time: 3, lyric: ' 制作人 : 胡皓/汪苏泷', uid: 269007 },
          { time: 29.82, lyric: '终于等到响起了下课铃', uid: 554752 },
          { time: 32.93, lyric: '已经约好在操场等你', uid: 323393 },
          { time: 35.29, lyric: '夏天真的是闷得可以', uid: 484565 },
          { time: 37.79, lyric: '带你去吃草莓冰淇淋', uid: 455332 },
          { time: 40.34, lyric: '如果你有一点坏心情', uid: 211143 },
          { time: 42.74, lyric: '我为你弹肖邦圆舞曲', uid: 320255 },
          { time: 45.13, lyric: '听到这首轻松的旋律', uid: 816628 },
          { time: 47.59, lyric: '好像吃了夹心巧克力', uid: 600484 },
          { time: 50.54, lyric: '当我偷偷看你', uid: 761392 },
          { time: 52.66, lyric: '当我偷偷的想着你', uid: 539245 },
          { time: 55.1, lyric: '想些深奥的问题', uid: 399129 },
          { time: 57.86, lyric: '我们的爱情', uid: 992011 },
          { time: 59.69, lyric: '是丘比特安排的游戏', uid: 80315 },
          { time: 63.35, lyric: '还是月下老人', uid: 509795 },
          { time: 65.45, lyric: '他傻傻分不清', uid: 199394 },
          { time: 68.26, lyric: '你说靠在我的肩膀', uid: 994613 },
          { time: 70.96, lyric: '有心电感应', uid: 321666 },
          { time: 73.21, lyric: '说不清又不像是梦境', uid: 134421 },
          { time: 77.52, lyric: '我们的爱情', uid: 970208 },
          { time: 79.32, lyric: '是两颗星星眯着眼睛', uid: 839193 },
          { time: 83.03, lyric: '还是命中注定', uid: 134182 },
          { time: 85.14, lyric: '我们会在一起', uid: 499509 },
          { time: 87.94, lyric: '牛顿说过', uid: 234165 },
          { time: 89.45, lyric: '有种东西叫万有引力', uid: 286605 },
          { time: 93.64, lyric: '我因为你开始相信', uid: 210784 },
          { time: 97.25, lyric: '那些大道理', uid: 212165 },
          { time: 108.55, lyric: '天空有太阳暖暖的放晴', uid: 331397 },
          { time: 111.74, lyric: '却又期待下一场大雨', uid: 425206 },
          { time: 114.09, lyric: '我和你撑伞雨中穿行', uid: 409009 },
          { time: 116.49, lyric: '收集每一个点点滴滴', uid: 10846 },
          { time: 119, lyric: '喜欢你瞪着大大眼睛', uid: 727403 },
          { time: 121.55, lyric: '对什么事情都很好奇', uid: 446803 },
          { time: 123.95, lyric: '每天拿着苹果想定律', uid: 753237 },
          { time: 126.41, lyric: '可爱到连吃饭都忘记', uid: 171185 },
          { time: 129.38, lyric: '当我偷偷看你', uid: 988768 },
          { time: 131.33, lyric: '当我偷偷的想着你', uid: 60178 },
          { time: 133.84, lyric: '想些深奥的问题', uid: 788346 },
          { time: 136.74, lyric: '我们的爱情', uid: 821405 },
          { time: 138.34, lyric: '是丘比特安排的游戏', uid: 74411 },
          { time: 142.09, lyric: '还是月下老人', uid: 559406 },
          { time: 144.2, lyric: '他傻傻分不清', uid: 992545 },
          { time: 146.95, lyric: '你说靠在我的肩膀有', uid: 278307 },
          { time: 150.06, lyric: '心电感应', uid: 83087 },
          { time: 151.91, lyric: '说不清又不像是梦境', uid: 904962 },
          { time: 156.32, lyric: '我们的爱情', uid: 90669 },
          { time: 158.07, lyric: '是两颗星星眯着眼睛', uid: 892921 },
          { time: 161.83, lyric: '还是命中注定', uid: 935255 },
          { time: 163.93, lyric: '我们会在一起', uid: 156615 },
          { time: 166.84, lyric: '牛顿说过', uid: 691607 },
          { time: 168.24, lyric: '有种东西叫万有引力', uid: 347223 },
          { time: 172.05, lyric: '我因为你开始相信', uid: 160967 },
          { time: 175.95, lyric: '那些大道理', uid: 601159 },
          { time: 181.04, lyric: '我们的爱情', uid: 963254 },
          { time: 182.69, lyric: '是丘比特安排的游戏', uid: 640498 },
          { time: 186.45, lyric: '还是月下老人', uid: 724427 },
          { time: 188.5, lyric: '他傻傻分不清', uid: 394531 },
          { time: 191.35, lyric: '你说靠在我的肩膀有', uid: 810377 },
          { time: 194.36, lyric: '心电感应', uid: 838172 },
          { time: 196.26, lyric: '说不清又不像是梦境', uid: 935461 },
          { time: 200.56, lyric: '我们的爱情', uid: 672722 },
          { time: 202.42, lyric: '是两颗星星眯着眼睛', uid: 654795 },
          { time: 206.12, lyric: '还是命中注定', uid: 348132 },
          { time: 208.23, lyric: '我们会在一起', uid: 539937 },
          { time: 211.01, lyric: '牛顿说过有种东西', uid: 276308 },
          { time: 213.71, lyric: '叫万有引力', uid: 615 },
          { time: 216.69, lyric: '我因为你开始相信', uid: 608577 },
          { time: 220.25, lyric: '那些大道理', uid: 35099 },
          { time: 228.02, lyric: '和声编写：胡皓@光合声动', uid: 521798 },
          { time: 229.33, lyric: '和声：汪苏泷 阿莲', uid: 95209 },
          { time: 230.63, lyric: '吉他：谷粟', uid: 941357 },
          { time: 231.97, lyric: '录音：任寒冰@北京光合声动录音室', uid: 990103 },
          { time: 233.51, lyric: '混音：任寒冰@北京海尚录音室', uid: 94814 },
          { time: 99999, lyric: '', uid: 610067 },
          { time: 99999, lyric: '', uid: 305136 },
          { time: 99999, lyric: '', uid: 118484 },
          { time: 99999, lyric: '', uid: 565057 },
          { time: 99999, lyric: '', uid: 619217 },
          { time: 99999, lyric: '', uid: 32556 },
          { time: 99999, lyric: '', uid: 706409 },
        ],
        src: 'http://m702.music.126.net/20231215101700/7648b050656fdeea52b61dedb71967f1/jd-musicrep-ts/0285/85d9/6f34/4361225c4f93371c6106aff1f51ff574.mp3',
      },
      {
        id: 1447048373,
        name: '后来 (Live)',
        singer: '刘若英',
        album: '2020 刘若英陪你 献上录音专辑',
        mvid: 0,
        cover: 'https://p1.music.126.net/tkR0td8I_wEHLLrc6u0HwA==/109951168165647907.jpg',
        lyric: [
          { time: 0, lyric: '', uid: 457428 },
          { time: 0, lyric: '', uid: 401099 },
          { time: 0, lyric: '', uid: 888276 },
          { time: 0, lyric: '', uid: 408976 },
          { time: 0, lyric: '', uid: 846047 },
          { time: 0, lyric: '', uid: 184859 },
          { time: 0, lyric: '', uid: 601066 },
          { time: 0, lyric: ' 作词 : 施人诚', uid: 595942 },
          { time: 1, lyric: ' 作曲 : 玉城千春', uid: 622878 },
          { time: 12.06, lyric: '后来 我总算学会了如何去爱', uid: 626574 },
          { time: 18.2, lyric: '可惜你早已远去消失在人海', uid: 86108 },
          { time: 24.27, lyric: '后来终于在眼泪中明白', uid: 171225 },
          { time: 30.58, lyric: '有些人一旦错过就不再', uid: 916184 },
          { time: 38.16, lyric: '栀子花白花瓣', uid: 71747 },
          { time: 43.96, lyric: '落在我蓝色百褶裙上', uid: 879981 },
          { time: 49.71, lyric: '爱你 你轻声说', uid: 340162 },
          { time: 56.53, lyric: '我低下头闻见一阵芬芳', uid: 563055 },
          { time: 62.53, lyric: '那个永恒的夜晚', uid: 696631 },
          { time: 66.19, lyric: '十七岁仲夏 你吻我的那个夜晚', uid: 327399 },
          { time: 74.97, lyric: '让我往后的时光 每当有感叹', uid: 240463 },
          { time: 81.17, lyric: '总想起当天的星光', uid: 818915 },
          { time: 87.35, lyric: '那时候的爱情', uid: 312642 },
          { time: 93.16, lyric: '为什么就能那样简单', uid: 998466 },
          { time: 98.7, lyric: '而又是为什么 人年少时', uid: 304503 },
          { time: 105.46, lyric: '一定要让深爱的人受伤', uid: 846685 },
          { time: 111.06, lyric: '在这相似的深夜里', uid: 463706 },
          { time: 115.76, lyric: '你是否一样 也在静静追悔感伤', uid: 930133 },
          { time: 124.05, lyric: '如果当时我们能 不那么倔强', uid: 628464 },
          { time: 130.72, lyric: '现在也不那么遗憾', uid: 827269 },
          { time: 135.51, lyric: '你都如何回忆我', uid: 534139 },
          { time: 138.3, lyric: '带着笑或是很沉默', uid: 782834 },
          { time: 141.4, lyric: '这些年来有没有人能让你不寂寞', uid: 876663 },
          { time: 147.27, lyric: '后来 我总算学会了如何去爱', uid: 309216 },
          { time: 153.94, lyric: '可惜你早已远去消失在人海', uid: 556287 },
          { time: 159.8, lyric: '后来 终于在眼泪中明白', uid: 467342 },
          { time: 166.25, lyric: '有些人一旦错过就不再', uid: 835024 },
          { time: 197.21, lyric: '你都如何回忆我', uid: 425596 },
          { time: 199.89, lyric: '带着笑或是很沉默', uid: 537535 },
          { time: 202.96, lyric: '这些年来有没有人能让你不寂寞', uid: 373208 },
          { time: 208.83, lyric: '后来 我总算学会了如何去爱', uid: 49675 },
          { time: 215.33, lyric: '可惜你早已远去消失在人海', uid: 78497 },
          { time: 221.26, lyric: '后来 终于在眼泪中明白', uid: 406717 },
          { time: 227.65, lyric: '有些人一旦错过就不再', uid: 139905 },
          { time: 233.42, lyric: '后来 我总算学会了如何去爱', uid: 208554 },
          { time: 239.96, lyric: '可惜你早已远去消失在人海', uid: 748879 },
          { time: 245.85, lyric: '后来 终于在眼泪中明白', uid: 945305 },
          { time: 252.22, lyric: '有些人一旦错过就不再', uid: 264309 },
          { time: 258.87, lyric: '永远不会再重来', uid: 65042 },
          { time: 264.74, lyric: '有一个男孩爱着那个女孩', uid: 879631 },
          { time: 99999, lyric: '', uid: 925535 },
          { time: 99999, lyric: '', uid: 262918 },
          { time: 99999, lyric: '', uid: 975396 },
          { time: 99999, lyric: '', uid: 560466 },
          { time: 99999, lyric: '', uid: 198405 },
          { time: 99999, lyric: '', uid: 26955 },
          { time: 99999, lyric: '', uid: 702688 },
        ],
        src: 'http://m801.music.126.net/20231215101648/028003d9d4a75ce9264ab9fffe4cb60f/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/23398587110/6177/2ffb/5315/f9b0fddd55b326878f5ab080251705f1.mp3',
      },
    ] as any
    const setPlayList = (data: IMusic[]) => {
      musicList.value = data
    }
    const pushPlayList = (data: IMusic) => {
      musicList.value.push(data)
      nowIndex.value = musicList.value.length - 1
    }
    /**
     * 补充之前的音乐信息
     * @param data
     */
    const supplementMusic = (data: IMusic) => {
      const index = musicList.value.findIndex((item) => item.id === data.id)
      if (index !== -1) {
        musicList.value[index] = { ...musicList.value[index], ...data }
      }
    }

    const removePlayList = (index: number) => {
      if (index === nowIndex.value) {
        musicList.value.splice(index, 1)
        nowIndex.value = (nowIndex.value - 1 + musicList.value.length) % musicList.value.length
        createAudio(nowMusic.value.src || '')
      } else {
        // 当前音乐播放的时间
        const currentTime = audio.value?.currentTime || 0

        musicList.value.splice(index, 1)
        if (index < nowIndex.value) {
          nowIndex.value--
        }
        if (audio.value) audio.value.currentTime = currentTime
      }
    }
    const clearPlayList = () => {
      musicList.value = []
    }

    return {
      show,
      setShow,
      miniShow,
      setMiniShow,
      playMode,
      setPlayMode,
      nowMusic,
      nowIndex,
      changeIndex,
      changeIndexUnlimited,
      nextMusic,
      prevMusic,
      musicList,
      setPlayList,
      pushPlayList,
      supplementMusic,
      removePlayList,
      clearPlayList,
    }
  },
  {
    // 开启数据持久化
    persist: true,
  }
)
